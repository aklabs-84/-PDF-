# 마크다운 노트 (Markdown Note) - 작업 로그 및 해결사례 모음

> 이 폴더(`docs/`)의 파일들은 프로젝트 진행 과정에서 발생했던 문제점, 의사결정 기록, 그리고 추가된 기능들의 히스토리를 추적하기 위한 로컬 전용 문서입니다. (GitHub 등 리포지토리에는 업로드되지 않습니다.) 변경 사항을 이어서 작업할 때 컨텍스트를 파악하는 용도로 사용하세요.

---

## [2026-02-25] 마크다운 에디터 UI/UX 대대적 개편 및 버그 수정

### 1. 주요 변경 사항 및 추가 기능
*   **플레인 텍스트 모드 제거:** 앱의 정체성을 PDF 컨버터에서 '마크다운 전용 노트'로 확립하면서, 불필요해진 플레인 텍스트 모드를 걷어내고 코드를 단순화함.
*   **스마트 페이스트(Smart Paste) 도입:** `turndown.js`를 이용해 웹에서 긁어온 복잡한 HTML 텍스트를 붙여넣기 할 때, 자동으로 깔끔한 마크다운 문법으로 변환해주는 기능 추가. (`paste-handler.js` 도입)
*   **마크다운 서식 툴바 대폭 확장:** 
    *   기존 (굵게, 기울임, 링크, 목록, 코드) -> **+ 취소선, 인용구, 구분선, 표, 이미지 삽입, 할 일 목록(체크리스트)** 버튼 추가.
    *   `제목(H)` 공통 버튼을 분리하여 **H1, H2, H3** 버튼으로 직관적으로 나눔.
*   **문서 전체 복사 버튼 추가:** 툴바 파일 컨트롤 위치에 현재 에디터에 작성된 마크다운 전문을 클립보드에 바로 복사하는 `copy-all-btn` 추가.

### 2. 해결한 주요 문제 (Troubleshooting)

#### Issue A: 다크모드 환경에서 테마 스타일 누락 및 가독성 저하
*   **증상:** 다크모드를 켰음에도 툴바의 텍스트 버튼들이나 도움말 모달창 텍스트가 하얗게 변하지 않고 검은색이라 읽기 어려운 문제 발생.
*   **원인:** Tailwind CSS의 `@apply`나 `dark:` 클래스들이 제대로 파싱/적용되지 않거나(동적 생성 엘리먼트), 인라인 스타일 및 CSS 파일 간의 우선순위 경합. 
*   **해결:**
    *   `index.html`에 Tailwind 플러그인용 `<style type="text/tailwindcss">` 블록을 직접 주입하여 빌드 툴 없이도 동적 클래스 처리가 완벽히 되도록 수정.
    *   도움말 팝업의 HTML 구조 안에 `dark:` 접두사가 붙은 Tailwind 유틸리티 클래스 (`dark:text-white`, `dark:bg-gray-800` 등)를 명시적으로 하드코딩하여 가시성 확보.
    *   마크다운 헤딩 태그 요소들도 동일하게 템플릿 색상이 묻히더라도 기본적으로 `dark:text-white`가 작동할 수 있도록 CSS 규칙 정비.

#### Issue B: 미리보기 창의 제목(H1~H6) 폰트 스케일링(확대/축소) 미적용 버그
*   **증상:** 툴바의 '글꼴 크게/작게' 돋보기 버튼을 누르면 본문(p, li 등)은 커지는데, H1~H6 제목들은 커지지 않거나 오히려 본문보다 더 작아지는 역전 현상 발생.
*   **원인:** `EditorManager`의 `applyTemplateStylesToPreview` 메서드 및 `templates.json`에서 특정 `fontSize` 속성을 강제로 픽셀(`px`) 단위 명시(`!important` 등)로 삽입. 이 때문에 UI의 돋보기 컨트롤(`currentFontSize`)이 먹히더라도 절대 크기 속성에 가로막힘.
*   **해결:**
    *   에디터 자바스크립트 내 강제 `font-size: xx px;` 삽입 코드를 제거.
    *   `index.html`의 CSS에서 `h1`~`h6`의 크기를 기존 로컬 단위나 px에서 **`em` (상대 배수 단위)**로 전면 수정. (예: `font-size: 2em;`)
    *   부모 컨테이너(`markdown-preview`)의 `fontSize`만 조작해도 하위 헤딩 태그들이 비율을 유지하며 함께 스케일링되도록 구조 완벽 분리. 

### 3. 다음 작업 시 참고할 점
*   툴바 버튼을 추가할 땐 `index.html` (버튼 마크업), `app.js` (이벤트 리스너 등록), `ui-manager.js` (이벤트 맵핑), `markdown-helper.js` (실제 서식 주입 로직) 4군데가 모두 연동되어야 합니다.
*   디자인이나 테마를 수정할 때는 항상 다크모드 동적 렌더에 영향을 주는지 고려하고, 가능하면 강제 인라인 스타일 삽입은 피하고 Tailwind 클래스로 처리하는 것이 좋습니다.

## 2026-02-25 추가 업데이트: 도움말 설명 및 Copy/Help 버튼 추가 (UI 다듬기)
- **미리보기 헤더 도움말 (Help) 버튼**: `마크다운 미리보기` 타이틀 옆 (전체화면 버튼 좌측)에 아이콘 버튼을 추가했습니다. 클릭 시 기존 단축키/문법 도움말 모달창이 열립니다.
- **도움말 모달 내용 보강**: `H1` (제목 1) 태그 생성 시, 템플릿의 CSS 때문에 아래쪽에 마치 밑줄처럼 보이는 스타일이 적용된다는 설명을 도움말을 통해 명시했습니다.
- **에디터 헤더 전체 복사 (Copy All) 버튼**: 기존 툴바 영역에 있던 `본문 전체 복사` 버튼을 `마크다운 에디터` 타이틀 우측 (전체화면 버튼 좌측)으로 이동하여, 문서 작성/수정 시 즉각적으로 복사할 수 있도록 사용성을 개선했습니다.
  - HTML 파일의 텍스트 매칭이 공백과 들여쓰기로 인해 까다로워 `js/ui/ui-manager.js`의 `setupEvents()` 과정에서 DOM 요소를 동적으로 삽입 (insertAdjacentHTML) 하도록 처리했습니다.

## 2026-02-25 2차 UI/UX 추가 개선: H1 밑줄 토글 및 버튼 그룹화
- **H1 밑줄 숨기기 토글**: 에디터 내의 환경설정 값이 전역 `settings`에 저장되게 하여 템플릿에 기본 내장된 제목 테두리 형태(border-bottom 등)를 강제로 보이지 않도록 끄고 켤 수 있는 `U` 아이콘 버튼을 툴바에 신규 배치했습니다.
- **헤더 우측 버튼 그룹화 (간격 조정)**: 각 패널 (마크다운 에디터, 미리보기) 헤더에 동적 아이콘 버튼을 넣을 때 `flex justify-between` 속성으로 인해 제목과 버튼, 버튼 사이의 레이아웃이 멀어지는 문제를 겪었습니다. 이에 새 버튼과 기존의 전체화면 버튼을 하나의 `div`로 감싸 `space-x-1` 패딩으로 깔끔하게 우측에 붙어있도록 수정 완료했습니다.
